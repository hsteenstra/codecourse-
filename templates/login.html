{% extends "base.html" %}
{% block content %}

<div class="auth-shell">
  <div class="card auth-panel">
    <div class="auth-split">
      <div class="auth-left">
        <div class="auth-badge">CodeCourse • Mission</div>
        <h1 style="margin-top: 16px;">CodeCourse</h1>
        <p class="subtitle">Empowering the next generation of coders — no matter their zip code.</p>

        <div class="stack" style="margin-top: 16px; gap: 12px;">
          <p>CodeCourse was built on one simple belief: where you live should never determine what you can learn.</p>
          <p>In many rural communities, access to computer science education is limited or nonexistent. CodeCourse exists to change that. We provide structured, accessible programming education designed for both students and teachers — whether you're learning independently or bringing coding into your classroom.</p>
          <p>Founded and built from scratch by a high school student who saw firsthand how limited rural tech opportunities can be, CodeCourse is proof that age and location don’t define impact. Every lesson, page, and resource was intentionally created to make computer science more accessible, practical, and empowering.</p>
        </div>

        <div class="panel" style="margin-top: 16px;">
          <div class="panel-title">For Students</div>
          <p style="margin-top: 8px;">Learn at your own pace. Build real projects. Develop skills that open doors in technology, engineering, entrepreneurship, and beyond.</p>
        </div>

        <div class="panel" style="margin-top: 12px;">
          <div class="panel-title">For Teachers</div>
          <p style="margin-top: 8px;">Access classroom-ready resources, structured curriculum, and our upcoming textbook designed to make implementing computer science simple — even in schools without established tech programs.</p>
        </div>

        <p class="subtitle" style="margin-top: 14px;">We believe computer science is not a privilege — it’s a tool for opportunity.</p>

        <div style="margin-top: 18px;" class="row wrap">
          <a class="btn btn-secondary" href="https://codeforme.org" target="_blank" rel="noopener">Visit the main site</a>
        </div>
      </div>

      <div class="auth-right">
        <div class="tabs" role="tablist" aria-label="Auth">
          <button class="tab active" id="tab-create" type="button">Create account</button>
          <button class="tab" id="tab-signin" type="button">Sign in</button>
        </div>

        <div id="panel-create" style="margin-top: 16px;">
          <form method="post" class="form">
            <input type="hidden" name="form_type" value="signup">

            <div class="form-row">
              <div class="span-12">
                <label>Full name</label>
                <input name="name" placeholder="Your name" required>
              </div>
              <div class="span-6">
                <label>Username</label>
                <input name="username" placeholder="Choose a username" required>
              </div>
              <div class="span-6">
                <label>Email</label>
                <input type="email" name="email" placeholder="name@example.com" required>
              </div>
              <div class="span-12">
                <label>Password</label>
                <input type="password" name="password" placeholder="Create a password" required>
              </div>
            </div>

            <div class="stack" style="margin-top: 6px;">
              <label>Role</label>
              <div class="role-pills" id="role-pills">
                <button class="pill selected" type="button" data-role="Student">Student</button>
                <button class="pill" type="button" data-role="Teacher">Teacher</button>
              </div>
              <input type="hidden" name="role" id="role" value="Student">
            </div>

            <div class="stack" style="margin-top: 6px;">
              <label>Avatar</label>
              <div class="avatar-grid" id="avatar-grid">
                {% for a in avatars %}
                  <div class="avatar-option {{ 'selected' if loop.first else '' }}" data-avatar="{{ a }}" role="button" tabindex="0" aria-label="Select avatar">
                    <img src="{{ url_for('static', filename=avatar_folder + '/' + a) }}" alt="avatar option">
                  </div>
                {% endfor %}
              </div>
              <input type="hidden" name="avatar" id="avatar" value="{{ avatars[0] if avatars else 'avatar-1.svg' }}">
            </div>

            <button class="btn btn-primary" type="submit" style="margin-top: 10px;">Create account</button>
          </form>

          <p class="muted" style="margin-top: 12px; font-weight: 700;">Already have an account? Use the Sign in tab.</p>
        </div>

        <div id="panel-signin" style="margin-top: 16px; display: none;">
          <form method="post" class="form">
            <input type="hidden" name="form_type" value="signin">
            <label>Username</label>
            <input name="username" placeholder="Your username" required>
            <label>Password</label>
            <input type="password" name="password" placeholder="Your password" required>
            <button class="btn btn-primary" type="submit">Sign in</button>
          </form>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
const tabCreate = document.getElementById('tab-create');
const tabSignin = document.getElementById('tab-signin');
const panelCreate = document.getElementById('panel-create');
const panelSignin = document.getElementById('panel-signin');

function setTab(which) {
  const isCreate = which === 'create';
  tabCreate.classList.toggle('active', isCreate);
  tabSignin.classList.toggle('active', !isCreate);
  panelCreate.style.display = isCreate ? 'block' : 'none';
  panelSignin.style.display = isCreate ? 'none' : 'block';
}

tabCreate.addEventListener('click', () => setTab('create'));
tabSignin.addEventListener('click', () => setTab('signin'));

const rolePills = document.getElementById('role-pills');
const roleInput = document.getElementById('role');
if (rolePills && roleInput) {
  rolePills.querySelectorAll('button[data-role]').forEach(btn => {
    btn.addEventListener('click', () => {
      rolePills.querySelectorAll('button').forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      roleInput.value = btn.dataset.role;
    });
  });
}

const avatarGrid = document.getElementById('avatar-grid');
const avatarInput = document.getElementById('avatar');
function selectAvatar(el) {
  avatarGrid.querySelectorAll('.avatar-option').forEach(a => a.classList.remove('selected'));
  el.classList.add('selected');
  avatarInput.value = el.dataset.avatar;
}
if (avatarGrid && avatarInput) {
  avatarGrid.querySelectorAll('.avatar-option').forEach(el => {
    el.addEventListener('click', () => selectAvatar(el));
    el.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') selectAvatar(el);
    });
  });
}
</script>

{% endblock %}
